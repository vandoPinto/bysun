<!DOCTYPE html>
<html lang="pt-BR">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Gerenciamento de Produtos</title>
    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
    <link rel="stylesheet" href="../projeto/src/css/styles.css">
    <style>
        body {
            font-family: Arial, sans-serif;
        }

        .container {
            width: 80%;
            margin: 0 auto;
        }

        h2 {
            text-align: center;
        }

        .form-group {
            margin-bottom: 15px;
        }

        label {
            display: block;
            margin-bottom: 5px;
        }

        input,
        textarea {
            width: 100%;
            padding: 8px;
            box-sizing: border-box;
        }

        .actions {
            margin-top: 20px;
            text-align: center;
        }

        .actions button {
            margin-right: 10px;
        }

        table {
            width: 100%;
            margin-top: 20px;
            border-collapse: collapse;
        }

        table,
        th,
        td {
            border: 1px solid #000;
        }

        th,
        td {
            padding: 10px;
            text-align: left;
        }
    </style>
</head>

<body>

    <div>
        <section class="descricao">
            <div class="descricao-container style1">
                <div class="imagem-container"><img src="./img/imagens-oculos/img1.jpeg" alt="" class="light-zoom"
                        style="max-height: 450px; width: auto;">
                    <div class="thumbs"><img src="./img/imagens-oculos/img1.jpeg" class="active"><img
                            src="./img/imagens-oculos/img2.jpeg"><img src="./img/imagens-oculos/img3.jpeg"><img
                            src="./img/imagens-oculos/img4.jpeg"></div>
                </div>
                <div class="texto-container style2">
                    <h1 class="style3">Óculos de Sol Feminino Oval</h1><a class="style4" href="#mais">conheça mais sobre
                        este produto</a>
                    <p class="style5">de 299,99</p>
                    <p class="style6">R$ 149,99</p>
                    <p class="style7">Frete a calcular de acordo com a região.</p>
                    <p class="style7">Desconto 5% no pix.</p><a class="style8"
                        href="https://api.whatsapp.com/send?phone=556198366-5716&amp;text=Olá gostaria de mais informações sobre o óculos: Óculos de Sol Feminino Oval, com o código: 6, http://127.0.0.1:5502/img/imagens-oculos/img1.jpeg "
                        target="_blank">COMPRAR</a>
                </div>
            </div>
            <div class="compartilhar-container style9">
                <p class="style10">compartilhar</p><a class="style11" href="">instagram</a><a class="style12"
                    href="">facebook</a>
            </div>
        </section>
        <section class="mais style13" id="mais">
            <div class="descricao-produto-selecionado style14">
                <h1 class="style15">DESCRIÇÃO DO PRODUTO</h1>
                <div class="style16">
                    <p>Estilo: Oval</p>
                    <p>Óculos de sol com design elegante e vintage.</p>
                    <p>Perfeito para adicionar um toque de sofisticação ao seu look.</p>
                    <p>Proteção UV: 100% UVA / UVB</p>
                    <p>Cor da armação: Marrom claro</p>
                    <p>Cor da lente: Marrom degradê</p>
                    <p>Inclui: 1 Óculos Solar, 1 Case e 1 Flanela para Limpeza.</p>
                </div>
            </div>
            <div class="especificacoes-produto style17">
                <h1 class="style18">ESPECIFICAÇÕES DO PRODUTO</h1>
                <div class="especificacoes-grid">
                    <div class="especificacoes-tipo">
                        <p>Gênero</p>
                        <p>Material da Lente</p>
                        <p>Cor da Lente</p>
                        <p>Proteção da Lente</p>
                        <p>Itens Inclusos</p>
                    </div>
                    <div class="especificacoes-info">
                        <p>Feminino</p>
                        <p>Acetato premium ou metal</p>
                        <p>Degradê, Marrom</p>
                        <p>Contra Raios UVA / UVB</p>
                        <p>Case e flanela</p>
                    </div>
                </div>
            </div>
        </section>
    </div>

    <div>
        <div class="container">
            <h2>Gerenciamento de Produtos</h2>
            <div class="form-group">
                <label for="categoria">Categoria</label>
                <select id="categoria">
                    <option value="FEMININO">Feminino</option>
                    <option value="MASCULINO">Masculino</option>
                    <option value="INFANTIL">Infantil</option>
                    <option value="PROMOÇÕES">Promoções</option>
                </select>
            </div>
            <div class="form-group">
                <label for="produtoId">ID do Produto</label>
                <input type="number" id="produtoId">
            </div>
            <div class="form-group">
                <label for="descricao">Descrição</label>
                <input type="text" id="descricao">
            </div>
            <div class="form-group">
                <label for="precoAntigo">Preço Antigo</label>
                <input type="text" id="precoAntigo">
            </div>
            <div class="form-group">
                <label for="precoNovo">Preço Novo</label>
                <input type="text" id="precoNovo">
            </div>
            <div class="form-group">
                <label for="descricaoProduto">Descrição do Produto</label>
                <textarea id="descricaoProduto" rows="5"></textarea>
            </div>
            <div class="form-group">
                <label for="imgs">Imagens (separadas por vírgula)</label>
                <input type="text" id="imgs">
            </div>
            <h3>Especificações do Produto</h3>
            <div class="form-group">
                <label for="material">Material</label>
                <input type="text" id="material">
            </div>
            <div class="form-group">
                <label for="genero">Gênero</label>
                <input type="text" id="genero">
            </div>
            <div class="form-group">
                <label for="protecaoLente">Proteção da Lente</label>
                <input type="text" id="protecaoLente">
            </div>
            <div class="form-group">
                <label for="itensInclusos">Ítens Inclusos</label>
                <input type="text" id="itensInclusos">
            </div>
            <div class="form-group">
                <label for="corLente">Cor da Lente</label>
                <input type="text" id="corLente">
            </div>
            <div class="actions">
                <button id="addProduto">Adicionar Produto</button>
                <button id="editProduto">Editar Produto</button>
                <button id="salvarProduto">Salvar</button>
                <button id="deleteProduto">Excluir Produto</button>
                <button id="loadJson">Carregar JSON</button>
                <button id="saveJson">Salvar JSON</button>
            </div>
        </div>
        <table id="produtosTable">
            <thead>
                <tr>
                    <th>CATEGORIA</th>
                    <th>ID</th>
                    <th>Descrição</th>
                    <th>Preço Antigo</th>
                    <th>Preço Novo</th>
                    <th>Descrição do Produto</th>
                    <th>Imagens</th>
                    <th>Material</th>
                    <th>Gênero</th>
                    <th>Proteção da Lente</th>
                    <th>Ítens Inclusos</th>
                    <th>Cor da Lente</th>
                </tr>
            </thead>
            <tbody></tbody>
        </table>
    </div>

    <script>
        let produtos = { "FEMININO": [], "MASCULINO": [], "INFANTIL": [], "PROMOÇÕES": [] };

        function renderTable(categoria) {
            let tbody = $("#produtosTable tbody");
            tbody.empty();
            produtos[categoria].forEach(produto => {






                tbody.append(`
                    <tr>
                        <td>${categoria}</td>
                        <td>${produto.id}</td>
                        <td>${produto.descricao}</td>
                        <td>${produto.precoAntigo}</td>
                        <td>${produto.precoNovo}</td>
                        <td>${produto.descricaoProduto.join(", ")}</td>
                        <td>${produto.imgs.join(", ")}</td>
                        <td>${produto.especificaProduto.Material}</td>
                        <td>${produto.especificaProduto.Genero}</td>
                        <td>${produto.especificaProduto['proteçao da lente']}</td>
                        <td>${produto.especificaProduto['Ítens inclusos']}</td>
                        <td>${produto.especificaProduto.corLente}</td>
                    </tr>
                `);
            });
        }

        $("#categoria").change(function () {
            renderTable($(this).val());
        });

        $("#addProduto").click(function () {
            let categoria = $("#categoria").val();
            let novoProduto = {
                id: parseInt($("#produtoId").val()),
                imgs: $("#imgs").val().split(","),
                descricao: $("#descricao").val(),
                precoAntigo: $("#precoAntigo").val(),
                precoNovo: $("#precoNovo").val(),
                descricaoProduto: $("#descricaoProduto").val().split(","),
                especificaProduto: {
                    Material: $("#material").val(),
                    Genero: $("#genero").val(),
                    "proteçao da lente": $("#protecaoLente").val(),
                    "Ítens inclusos": $("#itensInclusos").val(),
                    corLente: $("#corLente").val()
                }
            };
            produtos[categoria].push(novoProduto);
            renderTable(categoria);
        });

        $("#editProduto").click(function () {
            let categoria = $("#categoria").val();
            let id = parseInt($("#produtoId").val());
            let produto = produtos[categoria].find(p => p.id === id);
            if (produto) {
                produto.descricao = $("#descricao").val();
                produto.precoAntigo = $("#precoAntigo").val();
                produto.precoNovo = $("#precoNovo").val();
                produto.descricaoProduto = $("#descricaoProduto").val().split(",");
                produto.imgs = $("#imgs").val().split(",");
                produto.especificaProduto.Material = $("#material").val();
                produto.especificaProduto.Genero = $("#genero").val();
                produto.especificaProduto["proteçao da lente"] = $("#protecaoLente").val();
                produto.especificaProduto["Ítens inclusos"] = $("#itensInclusos").val();
                produto.especificaProduto.corLente = $("#corLente").val();
                renderTable(categoria);
            }
        });

        $("#deleteProduto").click(function () {
            let categoria = $("#categoria").val();
            let id = parseInt($("#produtoId").val());
            produtos[categoria] = produtos[categoria].filter(p => p.id !== id);
            renderTable(categoria);
        });

        $("#loadJson").click(function () {
            // let json = prompt("Cole o JSON aqui:");
            // if (json) {
            //     produtos = JSON.parse(json);
            //     renderTable($("#categoria").val());
            // }
            $.getJSON("https://bysun-740ca-default-rtdb.firebaseio.com/data.json", function (data) {
                // var produto = (obterParametrosURL());
                produtos = data;
                renderTable($("#categoria").val());
            });
        });



        $("#saveJson").click(function () {
            let json = JSON.stringify(produtos, null, 2);
            let blob = new Blob([json], { type: "application/json" });
            let url = URL.createObjectURL(blob);
            let a = document.createElement("a");
            a.href = url;
            a.download = "produtos.json";
            a.click();
            URL.revokeObjectURL(url);
        });
    </script>

</body>

</html>